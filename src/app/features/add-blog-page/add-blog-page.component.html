<div class="add-blog-page">
  <h2>{{ "ADD_BLOG_PAGE.TITLE" | translate }}</h2>
  <form [formGroup]="blogForm" class="blog-form">
    <!-- Titel -->
    <div class="form-group">
      <label for="title">{{
        "ADD_BLOG_PAGE.FORM.TITLE_LABEL" | translate
      }}</label>
      <input
        id="title"
        type="text"
        formControlName="title"
        [class.invalid]="title?.invalid && title?.touched"
      />
      <div class="error" *ngIf="title?.invalid && title?.touched">
        <small *ngIf="title?.errors?.['required']">
          {{ "ADD_BLOG_PAGE.ERRORS.TITLE_REQUIRED" | translate }}
        </small>
        <small *ngIf="title?.errors?.['minlength']">
          {{ "ADD_BLOG_PAGE.ERRORS.TITLE_MINLENGTH" | translate }}
        </small>
        <small *ngIf="title?.errors?.['titleExists']">
          {{ "ADD_BLOG_PAGE.ERRORS.TITLE_EXISTS" | translate }}
        </small>
      </div>
    </div>

    <!-- Inhalt -->
    <div class="form-group">
      <label for="content">{{
        "ADD_BLOG_PAGE.FORM.CONTENT_LABEL" | translate
      }}</label>
      <textarea
        id="content"
        formControlName="content"
        [class.invalid]="content?.invalid && content?.touched"
      ></textarea>
      <div class="error" *ngIf="content?.invalid && content?.touched">
        <small *ngIf="content?.errors?.['required']">
          {{ "ADD_BLOG_PAGE.ERRORS.CONTENT_REQUIRED" | translate }}
        </small>
        <small *ngIf="content?.errors?.['minlength']">
          {{ "ADD_BLOG_PAGE.ERRORS.CONTENT_MINLENGTH" | translate }}
        </small>
      </div>
    </div>

    <!-- Bild-Upload -->
    <div class="form-group">
      <label for="image">{{
        "ADD_BLOG_PAGE.FORM.IMAGE_LABEL" | translate
      }}</label>
      <input
        id="image"
        type="file"
        (change)="onImageUpload($event)"
        accept="image/*"
      />
      <div class="error" *ngIf="uploadError">
        <small>{{ uploadError }}</small>
      </div>
    </div>

    <!-- Buttons -->
    <div class="form-actions">
      <button type="button" class="btn back" (click)="goBack()">
        {{ "ADD_BLOG_PAGE.BUTTONS.BACK" | translate }}
      </button>
      <button type="button" class="btn reset" (click)="onReset()">
        {{ "ADD_BLOG_PAGE.BUTTONS.RESET" | translate }}
      </button>
      <button
        type="button"
        class="btn save"
        (click)="onSave()"
        [disabled]="blogForm.invalid || isSaving"
      >
        <ng-container *ngIf="!isSaving">
          {{ "ADD_BLOG_PAGE.BUTTONS.SAVE" | translate }}
        </ng-container>
        <ng-container *ngIf="isSaving">
          <span class="spinner"></span>
          {{ "ADD_BLOG_PAGE.BUTTONS.SAVING" | translate }}
        </ng-container>
      </button>
    </div>
  </form>
</div>
